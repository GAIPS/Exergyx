<mat-toolbar class="toolbar">
    <h1>{{title}}</h1>
    <span class="example-spacer"></span>
    <img src="../../assets/Logotipo_v1.png" />
</mat-toolbar>

<div class="column-container">
    <div class="column1">
        <p class="section-title">◖ MAIN INFORMATIONS</p>
        <mat-divider></mat-divider>
        <p class="field-title">CURRENT YEAR</p>
        <p class="bigger-text">{{this.PlayerVariables.current_year}}</p>
        <mat-divider></mat-divider>
        <p class="field-title">CO2 EMISSIONS</p>
        <p class="bigger-text">{{this.PlayerVariables.co2_emissions |  number: '1.0-2'}} MT</p>
        <mat-divider></mat-divider>
        <p class="field-title">AGGREGATED EFFICIENCY(COUNTRY)</p>
        <p class="bigger-text">{{this.PlayerVariables.efficiency * 100 |  number: '1.2-2'}} %</p>
        <mat-divider></mat-divider>
        <p class="field-title">RENEWABLE RATIO</p>
        <p class="bigger-text">{{this.get_renewable_ratio() |  number: '1.2-2' }} %</p>
        <button mat-button class="see-more-button" (click)="openDialog()">See Exergy <br>
             Distribution Table</button>
    </div>
    <div class="column2">
        <div class="policy-container" height="290">
            <svg width="682.6" height="220" viewBox="0 0 1000 350" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g width="650">
                    <path d="M0.5 289.5V42.6794L35.236 0.5H975.5V256.319L947.766 289.5H0.5Z" fill="url(#paint1_linear)"
                        stroke="#50CBFF" />
                    <path transform="translate(10,20)" d="M0.5 250.5V28.682L23.7331 1H242.503L243.999 224.826L223.466 250.5H0.5Z" fill="url(#pattern0)" />
                    <path transform="translate(10,20)" d="M0.5 250.5V28.682L23.7331 1H242.503L243.999 224.826L223.466 250.5H0.5Z" stroke="#C2EDFF"/>
                    <text x="300" y="30" class="svg-title">{{this.selectedPolitic?.title}}</text>
                    <text x="300" y="100" class="svg-desc-title">Description:</text>
                    <foreignObject x="300" y="120" width="600" height="120">
                        <p xmlns="http://www.w3.org/1999/xhtml" class="svg-desc">{{this.selectedPolitic?.desc}}</p>
                    </foreignObject>
                    <foreignObject x="750" y="250" width="600" height="120">
                        <p xmlns="http://www.w3.org/1999/xhtml" class="svg-price"><b>Price:</b> {{this.selectedPolitic?.price}}M €</p>
                    </foreignObject>
                    
                    <svg x="220" y="10" width="300" height="100" class="inner-svg">
                        <rect x="80" y="35" class="svg-rect"></rect>
                        <text x="50%" y="50%" dominant-baseline="middle" class="svg-type">#{{this.selectedPolitic?.type}}</text>
                    </svg>    
                </g>
                <defs>
                    <pattern id="pattern0" patternContentUnits="objectBoundingBox" width="1" height="1">
                        <use xlink:href="#image0" transform="translate(0) scale(0.00255496)"/> 
                    </pattern>
                    <image id="image0" xlink:href="https://material.angular.io/assets/img/examples/shiba2.jpg"/>
                    <linearGradient id="paint0_linear" x1="124" y1="6" x2="124" y2="241" gradientUnits="userSpaceOnUse">
                    <stop stop-color="#009DE0" stop-opacity="0.25"/>
                    <stop offset="1" stop-color="#009DE0"/>
                    </linearGradient>
                    <linearGradient id="paint1_linear" x1="437" y1="92" x2="943.355" y2="248.853"
                        gradientUnits="userSpaceOnUse">
                        <stop stop-color="#009DE0" stop-opacity="0.04" />
                        <stop offset="0.512984" stop-color="#E0F6FF" stop-opacity="0" />
                        <stop offset="1" stop-color="#009DE0" stop-opacity="0.08" />
                    </linearGradient>
                </defs>
            </svg>
        </div>
        <div class="policies-table-container">
            <p class="section-title">◖ INVESTMENT POLICIES</p>
            <table class="policies-table" mat-table [dataSource]="politics" class="mat-elevation-z8">

                <!-- Position Column -->
                <ng-container matColumnDef="Policy Name">
                  <th mat-header-cell *matHeaderCellDef> Policy Name </th>
                  <td mat-cell *matCellDef="let element"> {{element.title}} </td>
                </ng-container>
              
                <!-- Name Column -->
                <ng-container matColumnDef="Economy Sector">
                  <th mat-header-cell *matHeaderCellDef> Economy Sector </th>
                  <td mat-cell *matCellDef="let element"> {{element.type}} </td>
                </ng-container>
              
                <!-- Weight Column -->
                <ng-container matColumnDef="Price">
                  <th mat-header-cell *matHeaderCellDef> Price </th>
                  <td mat-cell *matCellDef="let element"> {{element.price}}M € </td>
                </ng-container>

                <ng-container matColumnDef="getdetails">
                    <th mat-header-cell *matHeaderCellDef>  </th>
                    <td align="right" mat-cell *matCellDef="let element">
                         <button *ngIf="!element.isUsed" [ngClass]="element.isUsed ? 'added' : 'add-button'" mat-raised-button color="primary" (click)="addToCart(element.id); ">Add to Cart</button> 
                         <button *ngIf="element.isUsed" [ngClass]="element.isUsed ? 'added' : 'add-button'" mat-raised-button (click)="removeFromCart(element);">Remove from Cart</button> 
                        </td>
                  </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row (click)="changeSelectedPolicy(row)"[class.row-added]="this.cartCollection.has(row)" [class.row-clicked]="clickedRow.has(row)" *matRowDef="let row; columns: displayedColumns;"></tr>
              </table>
              <br>
        
              <p class="section-title">◖ POWER TO INSTALL</p>
              <table class="power-to-install">
                  <tr>
                      <td class="installed-power"><p>Installed Renewable Power</p></td>
                      <td class="installed-power-value"><p>{{this.PlayerVariables.total_installed_power | number:'1.0-2'}}GW</p></td>
                  </tr>
                  <tr>
                      <td class="to-install"><p>Power to Install</p></td>
                      <td class="to-install-value">
                          <button class="minus" (click)="reducePower()"> - </button>
                          <p>{{this.powerToInstall |  number: '1.2-2'}}GW</p>
                          <button class="plus" (click)="addPower()"> + </button>
                      </td>
                  </tr>
              </table>
              <br>
        <br>
        </div>
        <br>
        <br>
        <br>
    </div>
   
    <div class="column3">
        <p class="section-title">◖SHOPPING CART</p>
        <tr>
            <td> <p class="field-title">POWER TO <br> INSTALL</p></td>
            <td class="power-to-install-cart"><p >{{this.powerToInstall |  number: '1.2-2'}}GW</p></td>
        </tr>
        <mat-divider></mat-divider>
        <p class="field-title">INVESTMENT POLICIES</p>
        <div class="shoppingCartItemsContainer" id="style-5">
            <div *ngFor="let item of cartCollection">
                <button class="itemButton" mat-raised-button color="primary" (click)="removeFromCart(item);">{{item.title}}</button>
            </div>
        </div>
        <mat-divider></mat-divider>
        <br>
        <tr>
            <td> <p class="special-title">COST OF <br>
                POWER TO <br>
                INSTALL</p></td>
            <td class="power-install-cost"><p>{{this.totalPowerCost |  number: '1.0-0'}}M€</p></td>
        </tr>
        
        <!-- <div class="fancy-divider">
            <svg width="336" height="20" viewBox="0 0 336 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <style>
                    .small {
                        font: italic 13px sans-serif;
                    }
                </style>
                <rect width="5" height="5" fill="#66C4EC" />
                <rect x="331" y="15" width="5" height="5" fill="#66C4EC" />
                <path d="M5 2.5H218.5L233.5 17.5H333" stroke="#66C4EC" />
                <text class="installed-power">Description:</text>
            </svg>
        </div> -->
        <mat-divider></mat-divider>
        <tr>
            <td> <p class="special-title">COST OF<br>INVESTIMENT<br>POLICIES</p>
            </td>
            <td class="total-politic-cost"><p>{{this.addedPoliticsCost}}M€</p></td>
        </tr>
        <mat-divider></mat-divider>
        <p class="field-title">REMAINING BUDGET</p>
        <p class="bigger-text">{{this.PlayerVariables.budget |  number: '1.0-0'}}M€</p>
        <button mat-button class="confirm-button" (click)="submitDecision()">Confirm<br>Investment</button>
    </div>
</div>